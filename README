Copyright 2012, 2013
Raffaello D. Di Napoli

This file is part of kernel-tools.

kernel-tools is free software: you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, either version 3 of the License, or (at your option) any later
version.

kernel-tools is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE. See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with
kernel-tools. If not, see <http://www.gnu.org/licenses/>.
--------------------------------------------------------------------------------

1. Introduction
---------------

Kernel-tools is a set of utilities to (re-)generate a kernel binary and modules
and/or tarball, with support for generating an initramfs from a compatible
self-contained initramfs-building system (such as tinytium).


2. How to use
-------------

The kernel-tools suite comprises these components:

kernel-gen
   Generates a kernel binary+modules and/or tarball, optionally generating an initramfs from a
   compatible self-contained initramfs-building system (such as tinytium). See also § 2.1 Using
   kernel-gen.

kernel-lsext
   Lists external firmware and/or modules for Linux along with the packages that installed them.


2.1 Using kernel-gen
--------------------

The most useful feature of kernel-gen is its ability to rebuild an initramfs to include the kernel
modules that have been just built by running make on the kernel source.

kernel-gen supports using for an initramfs either a folder with the initramfs contents, or a folder
containing at least an executable named “build”, which will be invoked from within the temporary
working directory which kernel-gen will create the initramfs archive from. Additionally, these
environment variables are passed to the build program:

   ARCH
      Target architecture, using the Linux kernel’s naming convention.
   CROSS_COMPILE
      Cross-compiling toolchain prefix.
   PORTAGE_ARCH
      Target architecture, using Portage’s naming convention.

For kernel-gen to pick an initramfs and enable the generation of the initramfs archive, a symlink to
it must be created at /usr/src/initramfs, or the path to it must be passed using the --initramfs
argument to kernel-gen.

